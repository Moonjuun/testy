---
description: 다국어(i18n), 번역, 국가별 라우팅 및 로컬라이제이션 규칙
globs: src/app/[locale]/**/*.tsx, src/components/**/*.tsx, messages/*.json
alwaysApply: true
---

아래의 조건 및 주의사항을 모두 적용하여 코드를 작성할 것.

==============================================

- [지원언어]
  - 'ko': 한국어 (기본 화폐: KRW ₩)
  - 'en': 영어 (기본 화폐: USD $)
  - 'ja': 일본어 (기본 화폐: JPY ¥)

==============================================

1. 텍스트 및 번역 조건 (Hardcoding Ban)

   - **No Hardcoding:** 컴포넌트 내부에 한글, 영어, 일본어 텍스트를 직접 작성하지 말 것.
   - **Translation Hook:** 반드시 `next-intl`의 `useTranslations` 훅을 사용하여 `messages/{locale}.json` 키를 참조할 것.
     - 예: `<h1>{t('home.hero_title')}</h1>`
   - **Alt Text:** 이미지의 `alt` 속성이나 `aria-label`도 반드시 번역 키를 사용할 것.

2. 라우팅 및 링크 조건

   - **Navigation:** 페이지 이동 시 표준 `<a>` 태그나 Next.js 기본 `Link` 대신, `src/navigation.ts` (또는 `next-intl`)에서 설정한 `Link`, `useRouter`를 사용할 것.
     - 이유: URL의 `/{locale}/...` 접두사를 유지하기 위함.
   - **Locale Param:** API 호출이나 데이터 페칭 시 `params.locale`을 활용하여 정확한 언어 데이터를 요청할 것.

3. 지역화 포맷팅 (Localization) 조건

   - **Currency:** 가격 표시 시 단순 문자열 결합(`₩` + price)을 금지하고, `Intl.NumberFormat` 또는 `useFormatter`를 사용하여 통화 기호 위치와 천 단위 콤마를 국가별 표준에 맞출 것.
   - **Date:** 날짜 표시는 국가별 선호 포맷을 따를 것. (JP/KR: YYYY.MM.DD, US: MM/DD/YYYY)

4. 스타일 및 폰트 대응

   - **Word Break:** CJK(한중일) 언어의 경우 `break-keep` 또는 `word-break: keep-all` 스타일을 적용하여 단어 중간 줄바꿈을 방지할 것.
   - **Font Family:** `globals.css` 또는 Tailwind 설정에서 언어별 폰트 폴백(Fallback)을 고려할 것. (일본어는 Noto Sans JP 등)

5. 국가별 비즈니스 로직 분기
   - **Affiliate:** 쇼핑몰 링크 생성 시 `locale` 또는 `country` 값을 확인하여 분기할 것.
     - `ko`: Coupang
     - `en`: Amazon US
     - `ja`: Amazon JP / Rakuten
